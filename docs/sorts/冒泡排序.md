---
id: bubble-sort
title: 冒泡排序
---

import Latex from '../../src/components/Latex.jsx';

冒泡排序（Bubble Sort）是一种简单直观的排序算法。它重复地走访过要排序的数列，依次比较两个元素，如果他们的顺序错误就把他们交换过来。走访数列的工作是重复地进行直到没有再需要交换，也就是说该数列已经排序完成。这个算法的名字由来是因为越小的元素会经由交换慢慢浮到数列的顶端。

### 算法步骤

1. 比较两个相邻元素，若前一个比后一个大，则交换位置；
2. 每一轮结束，最后一个元素是最大的数；
3. 对所有元素重复以上步骤，除了最后一个；
4. 持续每次对越来越少的元素重复上面的步骤，直到没有任何一对数字需要比较。

### 代码实现

```js
function bubbleSort(arr) {
  for (let i = 0; i < arr.length; i++) {
    // 一轮循环后，从第 length-i-1 开始是有序的
    for (let j = 0; j < arr.length - i - 1; j++) {
      // 判断相邻两元素大小关系
      if (arr[j] > arr[j + 1]) {
        let temp = arr[j];
        arr[j] = arr[j + 1];
        arr[j + 1] = temp;
      }
    }
  }

  return arr;
}
```

时间复杂度：因为嵌套两个 for 循环，所以冒泡排序的时间复杂度为 <Latex exp="O(n^2)" />

### 算法优化

冒泡排序总会执行 `(N-1)+(N-2)+(N-3)+..+2+1` 次，但如果运行到当中某一次时排序已经完成，或者输入的是一个有序数组，那么后边的比较就都是多余的，为了避免这种情况，我们增加一个 `flag`，判断排序是否在中途就已经完成（也就是判断有无发生元素交换）

```js
function bubbleSort(arr) {
  for (let i = 0; i < arr.length; i++) {
    // 设定一个标记，若为true，则表示此次循环没有进行交换，也就是待排序列已经有序，排序已经完成
    let flag = true;

    for (let j = 0; j < arr.length - i - 1; j++) {
      if (arr[j] > arr[j + 1]) {
        let tmp = arr[j];
        arr[j] = arr[j + 1];
        arr[j + 1] = tmp;
        flag = false;
      }
    }

    if (flag) break;
  }

  return arr;
}
```
